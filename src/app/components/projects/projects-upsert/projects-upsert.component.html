<div class="container mt-4">
  <div class="card shadow-sm">
    <div class="card-header text-white">
      <h2 class="mb-0">{{ projectId ? 'Editar Projeto' : 'Criar Projeto' }}</h2>
    </div>
    <div class="card-body">
      <form [formGroup]="projectForm" (ngSubmit)="save()" class="needs-validation" novalidate>
        
        <!-- Título -->
        <div class="mb-3">
          <label for="title" class="form-label">Título</label>
          <input id="title" type="text" class="form-control" formControlName="title" placeholder="Digite o título do projeto">
        </div>

        <!-- Descrição -->
        <div class="mb-3">
          <label for="description" class="form-label">Descrição</label>
          <textarea id="description" rows="4" class="form-control" formControlName="description" placeholder="Digite uma descrição detalhada"></textarea>
        </div>

        <!-- Categoria -->
        <div class="form-group">
          <label for="category">Categoria</label>
          <select id="category" class="form-control" formControlName="categoryFk">
            <option *ngFor="let cat of categories" [value]="cat.id">
              {{ cat.category }}
            </option>
          </select>
        </div>


        <div class="card mt-3">
          <div class="card-header bg-pink">
            <h3 class="mb-0">Mídias</h3>
          </div>
          <div class="card-body">
            
            <!-- Botão para adicionar mídia -->
            <button type="button" class="btn btn-sm btn-primary mb-3" (click)="addMedia()">
              Adicionar Mídia
            </button>

            <!-- Lista de mídias -->
            <div formArrayName="medias">
              <div *ngFor="let media of medias.controls; let i = index" [formGroupName]="i" class="border rounded p-3 mb-2">
                
                <!-- Descrição -->
                <div class="mb-2">
                  <label class="form-label">Descrição</label>
                  <input type="text" class="form-control" formControlName="description">
                </div>

                <!-- URL -->
                <div class="mb-2">
                  <label class="form-label">URL</label>
                  <input type="text" class="form-control" formControlName="url">
                </div>

                <!-- Tipo -->
                <div class="mb-2">
                  <label class="form-label">Tipo</label>
                  <select class="form-control" formControlName="type">
                    <option value="IMAGEM">Imagem/gif</option>
                    <option value="VIDEO">Vídeo</option>
                  </select>
                </div>

                <!-- Botão remover -->
                <button type="button" class="btn btn-danger btn-sm" (click)="medias.removeAt(i)">
                  Remover
                </button>

              </div>
            </div>

          </div>
</div>



        <!-- Botões -->
        <div class="d-flex justify-content-end gap-2 mt-5">
          <button type="button" class="btn btn-secondary" [routerLink]="['/projects']">Cancelar</button>
          <button type="submit" class="btn btn-success">Salvar</button>
        </div>
      </form>
    </div>
  </div>
</div>
